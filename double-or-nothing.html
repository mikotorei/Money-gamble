<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>2倍 or 0</title>
  <style>
    body { font-family: system-ui, sans-serif; max-width: 560px; margin: 32px auto; padding: 0 16px; }
    .card { border: 1px solid #ddd; border-radius: 12px; padding: 16px; }
    button { padding: 10px 14px; margin-right: 8px; border-radius: 10px; border: 1px solid #ccc; cursor: pointer; }
    button:disabled { opacity: .5; cursor: not-allowed; }
    #log { white-space: pre-wrap; background: #f7f7f7; padding: 12px; border-radius: 10px; border: 1px solid #eee; }
  </style>
</head>
<body>
  <h1>50%で2倍 / 50%で0</h1>

  <div class="card">
    <p>所持金：<strong id="money"></strong></p>
    <p>回数：<strong id="turn"></strong></p>

    <button id="play">勝負する</button>
    <button id="reset">リセット</button>

    <p id="result"></p>
    <div id="log"></div>
  </div>

  <script>
    const INITIAL_MONEY = 100;

    let money = INITIAL_MONEY;
    let turn = 0;
    const moneyEl = document.getElementById("money");
    const turnEl = document.getElementById("turn");
    const resultEl = document.getElementById("result");
    const logEl = document.getElementById("log");
    const playBtn = document.getElementById("play");

    function render() {
      moneyEl.textContent = money.toLocaleString();
      turnEl.textContent = turn.toString();
      playBtn.disabled = (money === 0);
      if (money === 0) resultEl.textContent = "ゲームオーバー！リセットしてね。";
    }

    function addLog(line) {
      logEl.textContent = (line + "\n") + logEl.textContent;
    }

    document.getElementById("play").addEventListener("click", () => {
      if (money === 0) return;

      turn += 1;
      const win = Math.random() < 0.5;

      if (win) {
        money *= 2;
        resultEl.textContent = `#${turn}: 成功！ 2倍になった`;
        addLog(`#${turn}: ✅ 2倍 → ${money.toLocaleString()}`);
      } else {
        money = 0;
        resultEl.textContent = `#${turn}: 失敗… 0になった`;
        addLog(`#${turn}: ❌ 0 → ${money.toLocaleString()}`);
      }

      render();
    });

    document.getElementById("reset").addEventListener("click", () => {
      money = INITIAL_MONEY;
      turn = 0;
      resultEl.textContent = "";
      logEl.textContent = "";
      render();
    });

    render();
  </script>
</body>
</html>
